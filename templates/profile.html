{% extends "base.html" %}

{% block body_contents %}
{% if 'user_id' in request.cookies %}
{% set my_id = request.cookies.get('user_id') %}
{% endif %}
<div class="container row">
	<h1 class="display-5" display="inline">{{ s[student].full_name }}</h1>
	{% if student == my_id %}
	<a class="ml-2" href="{{ url_for('editprofile') }}">Edit Profile</a>
	<a class="ml-2 text-warning" href="{{ url_for('suspendconfirm') }}">Suspend Account</a>
	<a class="ml-2 text-danger" href="{{ url_for('deleteconfirm') }}">Delete Account</a>
	{% endif %}	
	{% if student not in s[my_id].friends and student != my_id %}
	<a class="ml-2" href="{{ url_for('addfriend', friend=student) }}">Add Friend</a>
	{% endif %}
	{% if student in s[my_id].friends%}
	<a class="ml-2 text-danger" href="{{ url_for('removefriend', friend=student) }}">Unfriend</a>
	{% endif %}
</div>
<div class="card bg-light">
	<div class="card-body">
		<div class="card card-body text-white bg-secondary mb-3">
			<p class="card-text lead">
			{{ s[student].profile_text | safe }} 
			</p>
		</div>

<div class="row mb-3">
	<div class="col-md-3">	
		<img src="{{url_for('static',filename=s[student].picture)}}" width=200px height=200px></img>
	</div>
	<div class="col-md-9">	
		<table class="table ml-1 table-sm">
			<tbody>
				<tr>
					<td>zID</td>
					<td>{{ s[student].zid }}</td>
				</tr>
				<tr>
					<td>Age</td>
					<td>{{ s[student].age }}</td>
				</tr>
				<tr>
					<td>Birthday</td>
					<td>{{ s[student].birthday }}</td>
				</tr>
				<tr>
					<td>Program</td>
					<td>{{ s[student].program }}</td>
				</tr>
				<tr>
					<td>Suburb</td>
					<td>{{ s[student].home_suburb }}</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
<div class="card border-success">
	<div class="card-header">
		<div class="row">
			<h5 class="text-success">Friends List</h5>
			{% if student == my_id %}
			<a href="{{ url_for('friendsuggestions', n=0) }}" class="ml-2">want some suggestions?</a>
			{% endif %}
		</div>
	</div>
	<div class="card-body">
		{% if s[student].friends[0] != '' %}
    		{% for friend_row in s[student].friends | batch(4) %}
    		<div class="row">
    			{% for friend in friend_row %}
    			<div class="col-sm-3 mb-3">
	                <img src="{{url_for('static',filename=s[friend].picture)}}" class="rounded-circle" height="35" width="35">
	        		<a href="{{url_for('user', zid=s[friend].zid)}}">{{ s[friend].full_name }}</a>
	            </div>
                {% endfor %}
            </div>
    		{% endfor %}
    		{% endif %}
        </div>
    </div>
</div>
{% endblock %}